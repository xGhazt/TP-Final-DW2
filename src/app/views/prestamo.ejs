<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Libreria</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <link rel="stylesheet" href="/style.css">
</head>
<body> 
    <nav class="navbar navbar-expand-lg bg-body-tertiary" id="nav">
        <div class="container-fluid" id="nav">
          <a class="navbar-brand" href="/" style="color: white;">Libreria</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
            <div class="navbar-nav">
              <a class="nav-link" href="/catalogo" style="color: white;">Catalogo</a>
              <a class="nav-link" href="/registro" style="color: white;">Registro</a>
              <a class="nav-link" href="/prestamo" style="color: white;">Prestamos</a>
              
            </div>
          </div>
        </div>
      </nav>

    <div class="container" id="prestamo">
        <div class="row" >
            <div class="col-md-12 mt-4 text-center"  >
                <table class="table table-striped border border-danger border-3 table-dark"  >
                    <tr>
                        <th>ID</th>
                        <th>LIBRO</th>
                        <th>PRESTATARIO</th>
                        <th>EMAIL</th>
                        <th>PRÉSTAMO</th>
                        <th>DEVOLUCIÓN</th>
                        
                    </tr>
                    
                    <% for (var i=0; i<prestamo.length; i++){ %>

                        <% const fechaP = new Date(prestamo[i].fecha_prestamo);%>
                        <% const fechaD = new Date(prestamo[i].fecha_devolucion);%>
                        <% const opciones = { year: 'numeric', month: '2-digit', day: '2-digit' };%>
                        <% const fechaPrestamo = fechaP.toLocaleDateString('es-AR', opciones);%>
                        <% const fechaDevolucion = fechaD.toLocaleDateString('es-AR', opciones);%>
                        
                        <% const lib=prestamo[i].id_libro%>
                        <% const client=prestamo[i].id_cliente%>
                  
                        <% for(var j=0; j<cliente.length; j++){%>
                            <% if(cliente[j].id_cliente==client){%>
                                <%var posicionC=j%>
                                <% break %>
                            <%}%>
                        <%}%>
                        <% for(var j=0; j<libros.length; j++){%>
                            <% if(libros[j].id_libro==lib){%>
                                <%var posicionL=j%>
                                <% break %>
                            <%}%>
                        <%}%>
                    
                        <tr>
                            <td><%=prestamo[i].id_prestamo%></td>
                            <td><%=libros[posicionL].titulo%></td>
                            <td><%=cliente[posicionC].nombre+" "+cliente[posicionC].apellido%></td>
                            <td><%=cliente[posicionC].email%></td>
                            <td><%=fechaPrestamo%></td>
                            <td><%=fechaDevolucion%></td>
                        </tr>
                    <%} %>
                </table>
            </div>   
            
        </div>
    </div>
    
    


</body>
</html>